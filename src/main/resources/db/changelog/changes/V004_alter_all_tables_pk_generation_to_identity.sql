ALTER TABLE checks
    DROP CONSTRAINT IF EXISTS fk_checks_partner;
ALTER TABLE checks
    DROP CONSTRAINT IF EXISTS fk_checks_user;
ALTER TABLE partners
    DROP CONSTRAINT IF EXISTS pk_partners CASCADE;
ALTER TABLE users
    DROP CONSTRAINT IF EXISTS pk_users CASCADE;
ALTER TABLE events
    DROP CONSTRAINT IF EXISTS pk_events CASCADE;

ALTER TABLE partners
    DROP COLUMN partner_tg_id;
ALTER TABLE users
    DROP COLUMN tg_id;
ALTER TABLE checks
    DROP COLUMN check_id;
ALTER TABLE events
    DROP COLUMN event_id;

ALTER TABLE partners
    ADD COLUMN partner_tg_id INTEGER GENERATED BY DEFAULT AS IDENTITY;
ALTER TABLE users
    ADD COLUMN tg_id BIGINT GENERATED BY DEFAULT AS IDENTITY;
ALTER TABLE checks
    ADD COLUMN check_id INTEGER GENERATED BY DEFAULT AS IDENTITY;
ALTER TABLE events
    ADD COLUMN event_id INTEGER GENERATED BY DEFAULT AS IDENTITY;



ALTER TABLE partners
    ADD CONSTRAINT pk_partners PRIMARY KEY (partner_tg_id);
ALTER TABLE checks
    ADD CONSTRAINT pk_checks PRIMARY KEY (check_id);
ALTER TABLE users
    ADD CONSTRAINT pk_users PRIMARY KEY (tg_id);
ALTER TABLE events
    ADD CONSTRAINT pk_events PRIMARY KEY (event_id);

ALTER TABLE checks
    ADD CONSTRAINT fk_checks_partner FOREIGN KEY (partner_tg_id) REFERENCES partners (partner_tg_id);